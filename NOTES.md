Notes for the project

## Project structure

- `dist\` contains the distribution files. These are generated by the build script and include ES modules and Common JS versions  
- `src\` contains the source files  
    - `src\njk\` contain the nunjucks source base and macros
    - `src\templates\` contain the template files used to build the html files
- `test\` contains the scripts for testing 
- `app.mjs` express router 

## Running
Loads up express to review the test rendered HTML on local host.

Run `npm start`.

## Building

Generates the distribution files, which includes the package's ES modules and Common JS versions  

Run `npm run build`

## Testing
### Unit tests
Checks the HTML structure of the generated files are as expected.

Run `npm test`

## Deployment

### Adding new components
#### Make changes
**1. nunjucks file**

Create an `njk` file for the macro in the directory `src\njk\elements`.Macro must have the same name as it's file. For example `backLink.njk` should have `{% macro backLink(params) -%}`

**2. govcyElement.njk**

Update the `src\njk\govcyElement.njk` file macro with the new component, by adding the macro name in either the `macroBlocks` or `callMacroBlocks` arrays.

**3. test.njk**

update the `test\test.njk` file with all variant of the new component. When possible, give a distinctive id, or text content for each variant. For example `{{ govcyElement("backLink",{text:{en:"Back EN govcy-test-53",el:"Πίσω EL"} }) }}`

**4. test.json**

update the `test\test.json` file with the same variant of the new component as `test\test.njk`. For example `{"element": "backLink", "params": { "text": { "en": "Back EN govcy-test-53", "el": "Πίσω EL" } } },`

#### Test changes
**5. unit test script**

update the `test\moca\unit.test.mjs` file with tests for all the created variants. 

**6. re-build (Optional)**

 build by running `npm run build`

**7. manually test**

View the rendered HTML on local host by running `npm start`

**8. run unit tests**
Test by running `npm run test`

#### Update version

**9. update version number**

Update the `package.json` with a new version number.

**10. update changelog**

Update the `CHANGELOG.md` with the changes.