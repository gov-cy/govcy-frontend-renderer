<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
     
        <!-- CSS -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/gov-cy/govcy-design-system@v3.0.0/dist/css/govcy.uds.min.css" integrity="sha384-1zLHWOtnS0hOIz5mVEPZp0UH5gUE6eo0CQcCGA3sF2TyYhHyKOd3Ni8Iy/NjEASU" crossorigin="anonymous">
        
        <title>Page title - Service Name - gov.cy</title>
        <meta name="description" content="Description of what the service does">
     
     
      </head>
<body>
    <!--bodyStart-->
    <section class="govcy-container-fluid" id="bodyStartContainer">
        <a href="#mainContainer" class="govcy-skip-link">Skip to main content</a>
   </section>
     <!--main-->
     <main class="govcy-container" id="mainContainer">
        <div class="govcy-row">
            <article class="govcy-col-8">
                <div id="output" class="govcy-form"></div>
            </article>
        </div>
    </main>
  <script src="https://cdn.jsdelivr.net/gh/gov-cy/govcy-design-system@v3.0.0/dist/js/govcy.uds.min.js" integrity="sha384-zOuDuogVaaTveh/Ou2iYwCk14zFiSmMk7Ax8yRnXDtOJMyKZH5+ZNibNVwZSKtw+" crossorigin="anonymous"></script>
  </body>
  <script src="/dist/govcyCompiledTemplates.browser.js"></script>
  <script src="/dist/govcyFrontendRenderer.browser.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", async function() {
      // Ensure GovcyFrontendRendererBrowser is loaded before using it
      if (typeof GovcyFrontendRendererBrowser === 'undefined') {
        console.error('GovcyFrontendRendererBrowser is not defined');
      } else {
        console.log('GovcyFrontendRendererBrowser is loaded');
        // console.log('Precompiled templates:', window.nunjucksPrecompiled);

        // Create an instance of GovcyFrontendRendererBrowser
        const renderer = new GovcyFrontendRendererBrowser();

        // Define the input data
        const inputData = 
        {    
            "site" : {
                "lang" : "en"
            }
        };

        
        // Fetch the test.json file
        const response = await fetch('/test/test.json');
        const testJson = await response.json();
        // console.log('Loaded test.json:', testJson);
        // Construct the JSONTemplate
        const JSONTemplate = {
          "elements": []
        };
        // go through every section and add the elements to the JSONTemplate
        testJson.sections.forEach(section => {
          section.elements.forEach(element => {
            JSONTemplate.elements.push(element);
          });
        });

        // console.log('Constructed JSONTemplate:', JSONTemplate);
        let renderedHtml = renderer.renderFromJSON(JSONTemplate,inputData);
        document.getElementById('output').innerHTML += renderedHtml;
    }
});
  </script>
</body>
</html>